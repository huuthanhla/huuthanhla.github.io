/*
 * HTML5 Sortable jQuery Plugin
 * https://github.com/voidberg/html5sortable
 *
 * Original code copyright 2012 Ali Farhadi.
 * This version is mantained by Alexandru Badiu <andu@ctrlz.ro>
 *
 * Thanks to the following contributors: andyburke, bistoco, daemianmack, drskullster, flying-sheep, OscarGodson, Parikshit N. Samant, rodolfospalenza, ssafejava
 *
 * Released under the MIT license.
 */
(function(a){var c,g=a();a.fn.sortable=function(b){var h=String(b);b=a.extend({connectWith:!1,placeholder:null},b);return this.each(function(){"reload"===h&&a(this).children(b.items).off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s");if(/^enable|disable|destroy$/.test(h)){var l=a(this).children(a(this).data("items")).attr("draggable","enable"===h);"destroy"===h&&(a(this).off("sortupdate"),l.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s").off("sortupdate"))}else{l=
a(this).data("opts");"undefined"===typeof l?a(this).data("opts",b):b=l;var e,n,m=a(this).children(b.items),p,q,f=null===b.placeholder?a("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder">'):a(b.placeholder).addClass("sortable-placeholder");m.find(b.handle).mousedown(function(){e=!0}).mouseup(function(){e=!1});a(this).data("items",b.items);g=g.add(f);b.connectWith&&a(b.connectWith).add(this).data("connectWith",b.connectWith);m.attr("draggable","true").on("dragstart.h5s",
function(d){d.stopImmediatePropagation();if(b.handle&&!e)return!1;e=!1;d=d.originalEvent.dataTransfer;d.effectAllowed="move";d.setData("Text","dummy");n=(c=a(this)).addClass("sortable-dragging").index();p=a(this).parent()}).on("dragend.h5s",function(){c&&(c.removeClass("sortable-dragging").show(),g.detach(),q=a(this).parent(),n===c.index()&&p===q||c.parent().triggerHandler("sortupdate",{item:c,oldindex:n,startparent:p,endparent:q}),c=null)}).not("a[href], img").on("selectstart.h5s",function(){if(b.handle&&
!e)return!0;this.dragDrop&&this.dragDrop();return!1}).end().add([this,f]).on("dragover.h5s dragenter.h5s drop.h5s",function(d){if(!m.is(c)&&b.connectWith!==a(c).parent().data("connectWith"))return!0;if("drop"===d.type)return d.stopPropagation(),g.filter(":visible").after(c),c.trigger("dragend.h5s"),!1;d.preventDefault();d.originalEvent.dataTransfer.dropEffect="move";if(m.is(this)){var k=c.outerHeight(),e=a(this).outerHeight();b.forcePlaceholderSize&&f.height(k);if(e>k){var k=e-k,h=a(this).offset().top;
if(f.index()<a(this).index()&&d.originalEvent.pageY<h+k||f.index()>a(this).index()&&d.originalEvent.pageY>h+e-k)return!1}c.hide();a(this)[f.index()<a(this).index()?"after":"before"](f);g.not(f).detach()}else g.is(this)||a(this).children(b.items).length||(g.detach(),a(this).append(f));return!1})}})}})($);
